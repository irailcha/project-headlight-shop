import{r as t,j as i,u as z,d as L}from"./index-DsDJtiK1.js";import{I as _}from"./index-MkKXtdI8.js";import{M as H,u as S,P as W,a as T,b as B,L as D,m as M}from"./proxy-DDFqmjZE.js";class F extends t.Component{getSnapshotBeforeUpdate(a){const s=this.props.childRef.current;if(s&&a.isPresent&&!this.props.isPresent){const n=s.offsetParent,d=n instanceof HTMLElement&&n.offsetWidth||0,e=this.props.sizeRef.current;e.height=s.offsetHeight||0,e.width=s.offsetWidth||0,e.top=s.offsetTop,e.left=s.offsetLeft,e.right=d-e.width-e.left}return null}componentDidUpdate(){}render(){return this.props.children}}function K({children:r,isPresent:a,anchorX:s}){const n=t.useId(),d=t.useRef(null),e=t.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=t.useContext(H);return t.useInsertionEffect(()=>{const{width:g,height:l,top:x,left:o,right:m}=e.current;if(a||!d.current||!g||!l)return;const h=s==="left"?`left: ${o}`:`right: ${m}`;d.current.dataset.motionPopId=n;const f=document.createElement("style");return u&&(f.nonce=u),document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${g}px !important;
            height: ${l}px !important;
            ${h}px !important;
            top: ${x}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[a]),i.jsx(F,{isPresent:a,childRef:d,sizeRef:e,children:t.cloneElement(r,{ref:d})})}const U=({children:r,initial:a,isPresent:s,onExitComplete:n,custom:d,presenceAffectsLayout:e,mode:u,anchorX:g})=>{const l=S(A),x=t.useId(),o=t.useCallback(h=>{l.set(h,!0);for(const f of l.values())if(!f)return;n&&n()},[l,n]),m=t.useMemo(()=>({id:x,initial:a,isPresent:s,custom:d,onExitComplete:o,register:h=>(l.set(h,!1),()=>l.delete(h))}),e?[Math.random(),o]:[s,o]);return t.useMemo(()=>{l.forEach((h,f)=>l.set(f,!1))},[s]),t.useEffect(()=>{!s&&!l.size&&n&&n()},[s]),u==="popLayout"&&(r=i.jsx(K,{isPresent:s,anchorX:g,children:r})),i.jsx(W.Provider,{value:m,children:r})};function A(){return new Map}const w=r=>r.key||"";function I(r){const a=[];return t.Children.forEach(r,s=>{t.isValidElement(s)&&a.push(s)}),a}const G=({children:r,custom:a,initial:s=!0,onExitComplete:n,presenceAffectsLayout:d=!0,mode:e="sync",propagate:u=!1,anchorX:g="left"})=>{const[l,x]=T(u),o=t.useMemo(()=>I(r),[r]),m=u&&!l?[]:o.map(w),h=t.useRef(!0),f=t.useRef(o),v=S(()=>new Map),[N,b]=t.useState(o),[C,k]=t.useState(o);B(()=>{h.current=!1,f.current=o;for(let p=0;p<C.length;p++){const c=w(C[p]);m.includes(c)?v.delete(c):v.get(c)!==!0&&v.set(c,!1)}},[C,m.length,m.join("-")]);const j=[];if(o!==N){let p=[...o];for(let c=0;c<C.length;c++){const y=C[c],E=w(y);m.includes(E)||(p.splice(c,0,y),j.push(y))}return e==="wait"&&j.length&&(p=j),k(I(p)),b(o),null}const{forceRender:R}=t.useContext(D);return i.jsx(i.Fragment,{children:C.map(p=>{const c=w(p),y=u&&!l?!1:o===C||m.includes(c),E=()=>{if(v.has(c))v.set(c,!0);else return;let P=!0;v.forEach($=>{$||(P=!1)}),P&&(R==null||R(),k(f.current),u&&(x==null||x()),n&&n())};return i.jsx(U,{isPresent:y,initial:!h.current||s?void 0:!1,custom:a,presenceAffectsLayout:d,mode:e,onExitComplete:y?void 0:E,anchorX:g,children:p},c)})})},q=()=>{const r=z(),[a,s]=t.useState([]),[n,d]=t.useState(null);return t.useEffect(()=>{L.get("https://backend-headlight-shop.vercel.app/api/reviews").then(e=>s(e.data.map(u=>({url:u,x:Math.random()*window.innerWidth*.7,y:Math.random()*window.innerHeight*.7})))).catch(e=>console.error("Помилка отримання зображень",e))},[]),i.jsxs(i.Fragment,{children:[i.jsxs("button",{className:"btn-back",onClick:()=>r("/"),children:[i.jsx(_,{})," Hа головну"]}),i.jsxs("div",{className:"reviews",children:[i.jsx("h2",{className:"reviews__title",children:"Відгуки користувачів"}),i.jsx("div",{className:"reviews__list",children:a.map((e,u)=>i.jsx(M.img,{src:e.url,alt:"Review Screenshot",width:200,style:{left:e.x,top:e.y},className:"review-img",onClick:()=>d(e.url)},u))}),i.jsx(G,{children:n&&i.jsx(M.div,{className:"modal",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>d(null),children:i.jsx(M.img,{src:n,alt:"Selected Review",className:"modal-img",initial:{scale:.5,y:100},animate:{scale:1,y:0},exit:{scale:.5,y:100}})})})]})]})};export{q as default};
